<app-menu></app-menu>
<div class="form-page-bg">
    <div class="form-card">
        <div class="form-header">
            <img src="../../assets/LOGO.png" alt="Logo" class="form-logo">
            <h2>Registro de Habitación</h2>
            <p>Completa los datos para crear una nueva habitación</p>
        </div>

        <form [formGroup]="formulario" (ngSubmit)="procesarDatos()" class="form-body">
            <div class="form-input-group">
                <label>Nombre</label>
                <input type="text" class="form-input" formControlName="nombre">
                <small class="field-error" *ngIf="formulario.get('nombre')?.invalid && formulario.get('nombre')?.touched">
                    El nombre es obligatorio (mínimo 3 caracteres).
                </small>
            </div>

            <div class="form-input-group">
                <label>Foto</label>
                <input type="text" class="form-input" formControlName="foto">
                <small class="field-error" *ngIf="formulario.get('foto')?.invalid && formulario.get('foto')?.touched">
                    La URL de la foto es obligatoria.
                </small>
            </div>

            <div class="form-input-group">
                <label>Descripción</label>
                <input type="text" class="form-input" formControlName="descripcion">
                <small class="field-error" *ngIf="formulario.get('descripcion')?.invalid && formulario.get('descripcion')?.touched">
                    La descripción es obligatoria (mínimo 10 caracteres).
                </small>
            </div>

            <div class="form-input-group">
                <label>Precio Noche</label>
                <input type="number" class="form-input" formControlName="precio">
                <small class="field-error" *ngIf="formulario.get('precio')?.invalid && formulario.get('precio')?.touched">
                    El precio debe ser mayor a 0.
                </small>
            </div>

            <div class="form-input-group">
                <label>Número de Personas</label>
                <input type="number" class="form-input" formControlName="numeropersonas" min="1" max="20" step="1">
                <small class="field-error" *ngIf="formulario.get('numeropersonas')?.invalid && formulario.get('numeropersonas')?.touched">
                    El número de personas debe estar entre 1 y 20.
                </small>
            </div>

            <div class="form-input-group">
                <label>Servicios de la Habitación</label>
                <div class="servicios-grid">
                    <label class="servicio-item" *ngFor="let servicio of serviciosDisponibles">
                        <input
                            type="checkbox"
                            [checked]="isServicioSeleccionado(servicio)"
                            (change)="toggleServicio(servicio, $event)">
                        <span>{{ servicio }}</span>
                    </label>
                </div>
            </div>

            <button type="submit" class="form-submit-btn" [disabled]="cargandoRegistro">
                {{ cargandoRegistro ? 'Registrando...' : 'Registrar' }}
            </button>

            <div class="result-wrapper" *ngIf="mensajeRegistro">
                <div class="alert" [ngClass]="registroExitoso ? 'alert-success' : 'alert-danger'">
                    {{ mensajeRegistro }}
                </div>
            </div>
        </form>
    </div>
</div>
