<app-menu></app-menu>

<section class="resultado-wrap">
  <div class="resultado-card" *ngIf="!cargando && !error && data as d">
    <h2>Resultado del pago</h2>

    <p class="estado" [class.ok]="estadoVisual === 'APROBADO'" [class.fail]="estadoVisual === 'RECHAZADO'">
      Estado: {{ estadoVisual }}
    </p>

    <p><strong>Transacción:</strong> {{ d.transaccion.id }}</p>
    <p><strong>Referencia:</strong> {{ d.transaccion.reference || 'N/A' }}</p>
    <p><strong>Monto:</strong> COP {{ (d.transaccion.amount_in_cents / 100) | number:'1.0-0' }}</p>

    <p *ngIf="d.reserva"><strong>Reserva:</strong> {{ d.reserva.id }}</p>
    <p *ngIf="d.reserva"><strong>Estado reserva:</strong> {{ d.reserva.estadoReserva }}</p>

    <div class="acciones">
      <a routerLink="/alojamientos" class="btn-principal">Volver a alojamientos</a>
    </div>
  </div>

  <div class="resultado-card" *ngIf="cargando">
    <h2>Validando pago...</h2>
    <p>Estamos consultando el estado de tu transacción.</p>
  </div>

  <div class="resultado-card" *ngIf="!cargando && error">
    <h2>No pudimos validar el pago</h2>
    <p class="error">{{ error }}</p>
    <div class="acciones">
      <a routerLink="/alojamientos" class="btn-principal">Volver a alojamientos</a>
    </div>
  </div>
</section>

<app-footer></app-footer>
